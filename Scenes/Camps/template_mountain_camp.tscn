[gd_scene load_steps=15 format=3 uid="uid://dnkitk5whgg3r"]

[ext_resource type="Texture2D" uid="uid://bdlv5svsqkvrf" path="res://Assets/Camp/Camp_mountain.png" id="1_wifu6"]
[ext_resource type="PackedScene" uid="uid://uldm21fmtwyx" path="res://Scenes/Player/player.tscn" id="2_3hvpl"]
[ext_resource type="PackedScene" uid="uid://c22e3pib328ep" path="res://Scenes/Stations/furnace.tscn" id="3_768v3"]
[ext_resource type="PackedScene" uid="uid://bhgsnpk41ol4b" path="res://Scenes/Stations/mixing_bowl.tscn" id="4_is53t"]
[ext_resource type="PackedScene" uid="uid://fi1wgrchr8kk" path="res://Scenes/Stations/water.tscn" id="5_hwvy5"]
[ext_resource type="PackedScene" uid="uid://doy4bb45g1085" path="res://Scenes/Stations/mortar_and_pestle.tscn" id="6_w0ckg"]
[ext_resource type="PackedScene" uid="uid://d4d4b0g6aw2th" path="res://Scenes/Stations/wheat.tscn" id="7_iuk2b"]
[ext_resource type="Script" uid="uid://rnvwkq3eij6g" path="res://Scripts/GUI.gd" id="8_5hosk"]
[ext_resource type="PackedScene" uid="uid://c1xml0p8585f2" path="res://Scenes/invisible_wall.tscn" id="9_hp3a5"]
[ext_resource type="Script" uid="uid://sluadc1scs3u" path="res://Scripts/GUI_end_turn.gd" id="10_768v3"]
[ext_resource type="Script" uid="uid://gpyh2lxkqtod" path="res://Scripts/GUI_pause_menu.gd" id="11_is53t"]
[ext_resource type="Script" uid="uid://c2oxatc6kpwxo" path="res://Scripts/snow_pile.gd" id="12_hwvy5"]
[ext_resource type="Texture2D" uid="uid://chmqa5g7g436q" path="res://Assets/snow_pile.png" id="13_w0ckg"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_iuk2b"]

[node name="TestLevel" type="Node2D"]

[node name="CampMountain" type="Sprite2D" parent="."]
position = Vector2(579, 319.5)
scale = Vector2(1.82813, 2.02813)
texture = ExtResource("1_wifu6")

[node name="Player" parent="." instance=ExtResource("2_3hvpl")]
z_index = 2
position = Vector2(461, 335)
scale = Vector2(3, 3)

[node name="Camera2D" type="Camera2D" parent="Player"]
position = Vector2(0, 0.333333)
scale = Vector2(1, 1.00246)
zoom = Vector2(1.5, 1.5)
limit_left = 0
limit_top = 0
limit_right = 1160
limit_bottom = 640

[node name="Stations" type="Node" parent="."]

[node name="Furnace" parent="Stations" instance=ExtResource("3_768v3")]
position = Vector2(625, 271)
scale = Vector2(3, 3)

[node name="MixingBowl" parent="Stations" instance=ExtResource("4_is53t")]
position = Vector2(301, 230)
scale = Vector2(3, 3.00738)

[node name="Water" parent="Stations" instance=ExtResource("5_hwvy5")]
position = Vector2(832, 176)
scale = Vector2(3, 3)

[node name="MortarAndPestle" parent="Stations" instance=ExtResource("6_w0ckg")]
position = Vector2(729, 463)
scale = Vector2(3, 3)

[node name="Wheat" parent="Stations" instance=ExtResource("7_iuk2b")]
position = Vector2(393, 459)
scale = Vector2(3, 3)

[node name="InvisibleWalls" type="Node" parent="."]

[node name="InvisibleWall" parent="InvisibleWalls" instance=ExtResource("9_hp3a5")]
position = Vector2(195, 358)
scale = Vector2(1.30302, 17.813)

[node name="InvisibleWall2" parent="InvisibleWalls" instance=ExtResource("9_hp3a5")]
position = Vector2(941, 301)
scale = Vector2(1, 23.8)

[node name="InvisibleWall5" parent="InvisibleWalls" instance=ExtResource("9_hp3a5")]
position = Vector2(736, 123)
scale = Vector2(1, 5.28)

[node name="InvisibleWall3" parent="InvisibleWalls" instance=ExtResource("9_hp3a5")]
position = Vector2(453, 173)
scale = Vector2(29.4993, 0.826894)

[node name="InvisibleWall4" parent="InvisibleWalls" instance=ExtResource("9_hp3a5")]
position = Vector2(564, 539)
scale = Vector2(39.4, 1)

[node name="InvisibleWall6" parent="InvisibleWalls" instance=ExtResource("9_hp3a5")]
position = Vector2(837, 67)
scale = Vector2(11.52, 1)

[node name="CanvasLayer" type="CanvasLayer" parent="."]
scale = Vector2(3, 3)
transform = Transform2D(3, 0, 0, 3, 0, 0)

[node name="Control" type="Control" parent="CanvasLayer"]
z_index = 10
layout_mode = 3
anchors_preset = 0
offset_left = 455.0
offset_top = 294.0
offset_right = 495.0
offset_bottom = 334.0
script = ExtResource("8_5hosk")

[node name="EndTurnButton" type="Button" parent="CanvasLayer/Control"]
layout_mode = 0
offset_left = -122.667
offset_top = -100.667
offset_right = 6.33334
offset_bottom = -69.6667
scale = Vector2(0.352649, 0.583948)
text = "End Turn"

[node name="GameManagerLabel" type="Label" parent="CanvasLayer/Control"]
layout_mode = 0
offset_left = -452.0
offset_top = -291.0
offset_right = -228.0
offset_bottom = -111.0
scale = Vector2(0.607645, 0.477497)
text = "Biscuits: 
Turn: "

[node name="TimeRemainingLabel" type="Label" parent="CanvasLayer/Control"]
layout_mode = 0
offset_left = -240.667
offset_top = -268.0
offset_right = -16.6667
offset_bottom = -88.0
scale = Vector2(0.607645, 0.477497)
text = "Time remaining:
"

[node name="DiscardButton" type="Button" parent="CanvasLayer/Control"]
layout_mode = 0
offset_left = -361.333
offset_top = -290.333
offset_right = -294.333
offset_bottom = -259.333
scale = Vector2(0.431655, 0.336504)
text = "Discard"

[node name="CampTimer" type="Timer" parent="CanvasLayer/Control"]
wait_time = 60.0
autostart = true

[node name="WorldMapButton" type="Button" parent="CanvasLayer/Control"]
layout_mode = 0
offset_left = -129.667
offset_top = -289.333
offset_right = -36.6667
offset_bottom = -258.333
scale = Vector2(0.582228, 0.518008)
text = "World Map"

[node name="EndOfTurnPopup" type="Control" parent="CanvasLayer"]
process_mode = 2
z_index = 10
layout_mode = 3
anchors_preset = 0
offset_left = 455.0
offset_top = 294.0
offset_right = 495.0
offset_bottom = 334.0
script = ExtResource("10_768v3")

[node name="EndOfTurnLabel" type="Label" parent="CanvasLayer/EndOfTurnPopup"]
layout_mode = 0
offset_left = -404.667
offset_top = -211.0
offset_right = 25.3333
offset_bottom = -31.0
scale = Vector2(0.607645, 0.477497)
text = "How many biscuits do you want to eat while travelling?"

[node name="NumberOfBiscuitsLabel" type="Label" parent="CanvasLayer/EndOfTurnPopup"]
layout_mode = 0
offset_left = -300.667
offset_top = -198.333
offset_right = -274.667
offset_bottom = -171.333
scale = Vector2(0.607645, 0.477497)
text = "0"
horizontal_alignment = 1

[node name="AdvanceButton" type="Button" parent="CanvasLayer/EndOfTurnPopup"]
layout_mode = 0
offset_left = -317.667
offset_top = -151.0
offset_right = -188.666
offset_bottom = -120.0
scale = Vector2(0.352649, 0.583948)
text = "Advance"

[node name="NumberOfBiscuitsSlider" type="HSlider" parent="CanvasLayer/EndOfTurnPopup"]
layout_mode = 0
offset_left = -359.0
offset_top = -187.667
offset_right = -231.0
offset_bottom = -171.667
scale = Vector2(1.05991, 1)
rounded = true
scrollable = false
ticks_on_borders = true

[node name="PauseMenu" type="Control" parent="CanvasLayer"]
process_mode = 3
visible = false
top_level = true
z_index = 10
layout_mode = 3
anchors_preset = 0
offset_left = 455.0
offset_top = 294.0
offset_right = 495.0
offset_bottom = 334.0
script = ExtResource("11_is53t")

[node name="PauseLabel" type="Label" parent="CanvasLayer/PauseMenu"]
layout_mode = 0
offset_left = -345.0
offset_top = -231.0
offset_right = -121.0
offset_bottom = -51.0
scale = Vector2(0.607645, 0.477497)
text = "GAME PAUSED"
horizontal_alignment = 1
vertical_alignment = 1

[node name="ResumeButton" type="Button" parent="CanvasLayer/PauseMenu"]
layout_mode = 0
offset_left = -301.0
offset_top = -178.667
offset_right = -172.0
offset_bottom = -147.666
scale = Vector2(0.352649, 0.583948)
text = "Resume"

[node name="SnowPile1" type="Area2D" parent="."]
position = Vector2(571, 411)
scale = Vector2(3.12, 3.12)
script = ExtResource("12_hwvy5")

[node name="Sprite2D" type="Sprite2D" parent="SnowPile1"]
texture = ExtResource("13_w0ckg")

[node name="CollisionShape2D" type="CollisionShape2D" parent="SnowPile1"]
scale = Vector2(1.5, 1.5)
shape = SubResource("RectangleShape2D_iuk2b")

[connection signal="pressed" from="CanvasLayer/Control/EndTurnButton" to="CanvasLayer/Control" method="_on_end_turn_button_pressed"]
[connection signal="pressed" from="CanvasLayer/Control/EndTurnButton" to="CanvasLayer/Control/EndTurnButton" method="_on_pressed"]
[connection signal="pressed" from="CanvasLayer/Control/EndTurnButton" to="CanvasLayer/EndOfTurnPopup" method="_on_end_turn_button_pressed"]
[connection signal="pressed" from="CanvasLayer/Control/DiscardButton" to="CanvasLayer/Control" method="_on_discard_button_pressed"]
[connection signal="timeout" from="CanvasLayer/Control/CampTimer" to="CanvasLayer/Control" method="_on_camp_timer_timeout"]
[connection signal="pressed" from="CanvasLayer/Control/WorldMapButton" to="CanvasLayer/Control" method="_on_world_map_button_pressed"]
[connection signal="pressed" from="CanvasLayer/EndOfTurnPopup/AdvanceButton" to="CanvasLayer/EndOfTurnPopup" method="_on_advance_button_pressed"]
[connection signal="pressed" from="CanvasLayer/EndOfTurnPopup/AdvanceButton" to="CanvasLayer/EndOfTurnPopup/AdvanceButton" method="_on_pressed"]
[connection signal="value_changed" from="CanvasLayer/EndOfTurnPopup/NumberOfBiscuitsSlider" to="CanvasLayer/EndOfTurnPopup" method="_on_number_of_biscuits_slider_value_changed"]
[connection signal="pressed" from="CanvasLayer/PauseMenu/ResumeButton" to="CanvasLayer/PauseMenu" method="_on_resume_button_pressed"]
[connection signal="pressed" from="CanvasLayer/PauseMenu/ResumeButton" to="CanvasLayer/PauseMenu/ResumeButton" method="_on_pressed"]
[connection signal="body_entered" from="SnowPile1" to="Player" method="_on_snow_pile_1_body_entered"]
[connection signal="body_exited" from="SnowPile1" to="Player" method="_on_snow_pile_1_body_exited"]
